{"version":3,"file":"bundles/pages/_app.js","sources":["webpack:///webpack/bootstrap edc25391915769d91a12","webpack:///pages/_app.js","webpack:///redux/middlewares/promise.middleware.js","webpack:///redux/reducers/auth.js","webpack:///redux/reducers/index.js","webpack:///redux/store.js","webpack:///utils/api.js","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"axios\"","webpack:///external \"lodash\"","webpack:///external \"next-redux-wrapper\"","webpack:///external \"next/app\"","webpack:///external \"react\"","webpack:///external \"react-redux\"","webpack:///external \"redux\"","webpack:///external \"redux-define\"","webpack:///external \"redux-devtools-extension\"","webpack:///external \"redux-logger\"","webpack:///external \"redux-thunk\""],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap edc25391915769d91a12","import React from 'react';\nimport App, { Container } from 'next/app';\nimport withRedux from 'next-redux-wrapper';\nimport initStore from '../redux/store';\nimport { Provider } from 'react-redux';\nclass CustomApp extends App {\n    static async getInitialProps({Component, ctx}) {\n        return {\n            pageProps: {\n                ...(Component.getInitialProps ? await Component.getInitialProps(ctx) : {}),\n            }\n        };\n    }\n\n    render() {\n        const {Component, pageProps, store } = this.props\n        return (\n            <Provider store={store}>\n                <Component {...pageProps} />\n            </Provider>\n        )\n    }\n}\nexport default withRedux(initStore)(CustomApp)\n\n\n// WEBPACK FOOTER //\n// pages/_app.js","export default () => next => (action) => {\n    if (!action.promise) {\n      return next(action);\n    }\n    next({\n      ...action,\n      type: action.type.PENDING,\n    });\n    const actionPromise = new Promise((resolve, reject) =>\n      action.promise\n        .then(response => resolve(\n          next({ ...action, type: action.type.RESOLVED, ...response })\n        ))\n        .catch(error => reject(\n          next({ ...action, type: action.type.REJECTED, error })\n        ))\n    );\n    return actionPromise;\n  };\n\n\n// WEBPACK FOOTER //\n// redux/middlewares/promise.middleware.js","import _ from 'lodash';\nimport axios from '../../utils/api';\n\nimport { defineAction } from 'redux-define';\n\nconst App = 'SMARTMORN';\n\nconst ACTION_AUTH_LOGIN = defineAction('AUTH_LOGIN', ['PENDING', 'RESOLVED', 'REJECTED'], App);\nconst ACTION_AUTH_REGISTER = defineAction('AUTH_REGISTER', ['PENDING', 'RESOLVED', 'REJECTED'], App);\nconsole.log(ACTION_AUTH_REGISTER);\nconst initialState = {\n    isLogin: false,\n    loading: false,\n    messageLogin: '',\n    messageRegister: '',\n    error: ''\n};\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTION_AUTH_LOGIN.RESOLVED: \n            return {\n                ...state,\n                isLogin: !state.isLogin,\n                loading: false\n            };\n        case ACTION_AUTH_LOGIN.PENDING: \n            return {\n                ...state,\n                loading: !state.loading\n            }\n        case ACTION_AUTH_LOGIN.REJECTED: \n            return {\n                ...state,\n                loading: !state.loading,\n                messageLogin: action.payload.message\n            }\n        case ACTION_AUTH_REGISTER.REJECTED: \n            return {\n                ...state,\n                loading: !state.loading,\n                messageRegister: action.payload.message,\n                error: true\n            }\n        case ACTION_AUTH_REGISTER.PENDING: \n            return {\n                ...state,\n                loading: !state.loading\n            }\n        case ACTION_AUTH_REGISTER.RESOLVED: \n            return {\n                ...state,\n                messageRegister: action.payload.message,\n                error: false\n            }\n        default: return state;\n    }\n};\n\nexport const actions = {\n    Login: (username, password) => (dispatch)  => {\n        dispatch({\n            type: ACTION_AUTH_LOGIN.PENDING\n        })\n        axios().post('/users/login',{\n            username: username,\n            password: password\n        }).then((resp) => {\n            if(!resp.data.error) {\n                window.localStorage.setItem('SmartMornKey', resp.data.token);\n                return dispatch({ \n                    type: ACTION_AUTH_LOGIN.RESOLVED\n                });\n                \n            } else {\n                return dispatch({ \n                    type: ACTION_AUTH_LOGIN.REJECTED,\n                    payload: {\n                        message: resp.data.message\n                    }\n                });\n            }\n        }).catch((error) => {\n            return dispatch({ \n                type: ACTION_AUTH_LOGIN.REJECTED,\n                payload: {\n                    message: 'Error : cannot connect to api server'\n                }\n            });\n        });\n    }, \n    Register: (state) => (dispatch) => {\n        \n        if(state.password != state.confirmPassword) {\n            return dispatch({ \n                type: ACTION_AUTH_REGISTER.REJECTED,\n                payload: {\n                    message: 'Password not Match'\n                }\n            });\n        }\n        dispatch({\n            type: ACTION_AUTH_REGISTER.PENDING\n        })\n        axios().post('/users/register',{\n            username: state.username,\n            password: state.password,\n            birthday: state.birthday,\n            gender: state.gender\n        }).then((resp) => {\n            if(!resp.data.error) {\n                return dispatch({ \n                    type: ACTION_AUTH_REGISTER.RESOLVED,\n                    payload: {\n                        message: resp.data.message\n                    }\n                });\n                \n            } else {\n                return dispatch({ \n                    type: ACTION_AUTH_REGISTER.REJECTED,\n                    payload: {\n                        message: resp.data.message\n                    }\n                });\n            }\n        }).catch((error) => {\n            return dispatch({ \n                type: ACTION_AUTH_REGISTER.REJECTED,\n                payload: {\n                    message: 'Error : cannot connect to api server'\n                }\n            });\n        });\n    }\n};\n\n// Debug \n// export const login = (username,password) => (dispatch) => {\n//     const data = dispatch({\n//         type: 'Login',\n//         payload: {\n//             username: username,\n//             password: password\n//         }\n//     });\n//     console.log(data);\n// }\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// redux/reducers/auth.js","import { combineReducers } from 'redux';\nimport auth from './auth';\nexport default combineReducers({\n    auth\n});\n\n\n// WEBPACK FOOTER //\n// redux/reducers/index.js","import logger from 'redux-logger'\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport promiseMiddleware from './middlewares/promise.middleware';\nimport reducers from './reducers/index';\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport thunkMiddleware from 'redux-thunk'\n\n// let middlewares;\n\n// if (global.window && global.window.__REDUX_DEVTOOLS_EXTENSION__ && process.env.NODE_ENV !== 'production') {\n// \tmiddlewares = composeWithDevTools(\n// \t\tapplyMiddleware(promiseMiddleware),\n// \t\tapplyMiddleware(thunkMiddleware,logger)\n        \n// \t);\n// } else {\n// \tmiddlewares = compose(\n// \t\tapplyMiddleware(promiseMiddleware),\n// \t\tapplyMiddleware(thunkMiddleware),\n\t\t\n// \t);\n// }\n//export default initialState => createStore(reducers,initialState,middlewares);\n\nexport default initialState => createStore(\n\treducers, \n\tinitialState, \n\tcomposeWithDevTools(\n\tapplyMiddleware(\n\t\tpromiseMiddleware,\n\t\tthunkMiddleware,\n\t\tlogger\n\t)\n))\n\n\n\n// WEBPACK FOOTER //\n// redux/store.js","import axios from 'axios';\n\nexport default () => axios.create({\n        baseURL: 'http://localhost:8081/api/v1/',\n        headers: {\n            'x-access-token': window.localStorage.getItem('smartKey') || ''\n        }\n    });\n\n// const handleResponse = (response) => {\n//     if (response.data) {\n//         return Promise.resolve(response);\n//     }\n//     return Promise.reject(response);\n// };\n\n// const catchError = e => Promise.reject(e.response.data);\n\n// export default {\n//     get: path => (\n//         createApiInstance()\n//         .get(path)\n//         .then(handleResponse)\n//         .catch(catchError)\n//     ),\n//     post: (path, body = {}, headers = {}) => (\n//         createApiInstance()\n//         .request({\n//             url: path,\n//             method: 'POST',\n//             headers,\n//             data: body,\n//         })\n//         .then(handleResponse)\n//         .catch(catchError)\n//     ),\n//     put: (path, body = {}) => (\n//         createApiInstance()\n//         .request({\n//             url: path,\n//             method: 'PUT',\n//             data: body,\n//         })\n//         .then(handleResponse)\n//         .catch(catchError)\n//     ),\n// };\n\n\n// WEBPACK FOOTER //\n// utils/api.js","module.exports = require(\"@babel/runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/regenerator\"\n// module id = @babel/runtime/regenerator\n// module chunks = 0","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = axios\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = lodash\n// module chunks = 0","module.exports = require(\"next-redux-wrapper\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"next-redux-wrapper\"\n// module id = next-redux-wrapper\n// module chunks = 0","module.exports = require(\"next/app\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"next/app\"\n// module id = next/app\n// module chunks = 0","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = react\n// module chunks = 0 1 4 6","module.exports = require(\"react-redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-redux\"\n// module id = react-redux\n// module chunks = 0","module.exports = require(\"redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux\"\n// module id = redux\n// module chunks = 0","module.exports = require(\"redux-define\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-define\"\n// module id = redux-define\n// module chunks = 0","module.exports = require(\"redux-devtools-extension\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-devtools-extension\"\n// module id = redux-devtools-extension\n// module chunks = 0","module.exports = require(\"redux-logger\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-logger\"\n// module id = redux-logger\n// module chunks = 0","module.exports = require(\"redux-thunk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-thunk\"\n// module id = redux-thunk\n// module chunks = 0"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;;;;;AASA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;;AAfA;;;;AAGA;;;;;;AAAA;AACA;;;;;;;AADA;AACA;;;;;AAFA;;;;;;;;;;;;;;;;;;AAHA;AACA;AAiBA;;;;;;;;;;;;ACvBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAFA;AAIA;AAAA;AAEA;AACA;AAAA;AADA;AAGA;AACA;AAAA;AAAA;AADA;AALA;AASA;AACA;AAlBA;AAAA;;;;;;;;;;;;;;;;;;ACAA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAHA;AACA;AAIA;AACA;AAEA;AAFA;AACA;AAGA;AACA;AAEA;AACA;AAHA;AACA;AAIA;AACA;AAEA;AACA;AACA;AAJA;AACA;AAKA;AACA;AAEA;AAFA;AACA;AAGA;AACA;AAEA;AACA;AAHA;AACA;AAIA;AAAA;AApCA;AAsCA;AAEA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AACA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AA9BA;AA+BA;AAAA;AAEA;AACA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AAAA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AADA;AAFA;AAOA;AACA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AACA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AA3CA;AAhCA;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACnJA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;;;;;;;;ACFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;ACxBA;AAAA;AAAA;AAEA;AAAA;AACA;AACA;AACA;AADA;AAFA;AAAA;AAQA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC9CA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;A","sourceRoot":""}